import{j as s,H as T,g as m}from"./index-CJyZ3len.js";import{a,P as W}from"./index-xAMIIVWc.js";import{r as l,L as _}from"./router-Bu5b4_LN.js";import"./input-DvRl1kRW.js";import{R as c}from"./FileUpload-BDeXmpoX.js";import{L as E,P as q}from"./index-1hIK49tO.js";import{C as z}from"./card-INbucF__.js";import"./axios-DmypytPv.js";import"./select-D1QcyAvF.js";const B=[{value:"1",label:"Paid"},{value:"0",label:"Unpaid"},{value:"2",label:"Due"}];function Z(){var x,p,u,g,j,f,v,b,P,N,S;const[d,C]=l.useState(1),[h,L]=l.useState(10),[n,$]=l.useState(""),[o,D]=l.useState(""),[r,F]=l.useState("");let i=`page=${d}&limit=${h}`;n&&(i+=`&monthId=${n}`),o&&(i+=`&planId=${o}`),r&&(i+=`&paidstatus=${r}`);const t=a({api:`${m.getMonthPlanWise}?${i}`,key:"get-month-plan-wise-report",options:{enabled:!0}}),H=a({api:m.getAllActiveMonths,key:"get-all-active-months-rpt",options:{enabled:!0}}),R=a({api:m.getAllActivePlan,key:"get-all-active-plans-rpt",options:{enabled:!0}});return s.jsx(W,{title:"Month/Plan Report",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("div",{children:s.jsx(c,{name:"monthId",data:((x=H.data)==null?void 0:x.data.map(e=>({value:e._id,label:e.monthName})))??[],label:"Month",selectedText:"Select Month",isNormal:!0,isHookForm:!1,onChange:e=>$(e.target.value),value:n})}),s.jsx("div",{children:s.jsx(c,{name:"planId",data:((p=R.data)==null?void 0:p.data.map(e=>({value:e._id,label:e.planName})))??[],label:"Plan",selectedText:"Select Plan",isNormal:!0,isHookForm:!1,onChange:e=>D(e.target.value),value:o})}),s.jsx("div",{children:s.jsx(c,{name:"paidStatus",data:B,label:"Paid Status",selectedText:"Select Paid Status",isNormal:!0,isHookForm:!1,onChange:e=>F(e.target.value),value:r})}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"flex-end"},children:s.jsx(T,{size:"sm",onClick:()=>{t.refetch()},children:"Search"})})]}),s.jsx("div",{className:"border-t border-secondary mt-1 mb-1"}),s.jsxs(E,{dataLength:((j=(g=(u=t.data)==null?void 0:u.data)==null?void 0:g.docs)==null?void 0:j.length)??0,isLoading:t.isFetching,children:[s.jsx("div",{className:"grid grid-cols-1 gap-0 mt-2",children:(v=(f=t.data)==null?void 0:f.data)==null?void 0:v.docs.map((e,w)=>{var y,A,I,M,k;return s.jsxs("div",{children:[s.jsx(_,{to:`/gym-app/view-member/${(y=e==null?void 0:e.member)==null?void 0:y._id}`,children:s.jsx(z,{className:" p-4 shadow-none bg-secondary",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xs font-semibold text-muted-foreground",children:"Member Name"}),s.jsx("h1",{className:"text-sm font-semibold",children:(A=e==null?void 0:e.member)==null?void 0:A.memberName})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xs font-semibold text-muted-foreground",children:"Member ID"}),s.jsx("h1",{className:"text-sm font-semibold",children:(I=e==null?void 0:e.member)==null?void 0:I.generatedId})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xs font-semibold text-muted-foreground",children:"Plan Name"}),s.jsxs("h1",{className:"text-sm font-semibold",children:[(M=e==null?void 0:e.plan)==null?void 0:M.planName," (",(k=e==null?void 0:e.month)==null?void 0:k.month,")"]})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xs font-semibold text-muted-foreground",children:(e==null?void 0:e.paidStatus)==1&&"Paid Amount"||(e==null?void 0:e.paidStatus)==2&&"Due Amount"||(e==null?void 0:e.paidStatus)==0&&"Amount"}),s.jsx("h1",{className:"text-sm font-semibold",children:(e==null?void 0:e.paidStatus)==1&&(e==null?void 0:e.paidAmount)||(e==null?void 0:e.paidStatus)==2&&(e==null?void 0:e.dueAmount)||(e==null?void 0:e.paidStatus)==0&&(e==null?void 0:e.amount)})]})]})})}),s.jsx("div",{className:"border-t border-secondary mt-2 mb-2"})]},w+1)})}),s.jsx("div",{className:"flex justify-end mt-3",children:s.jsx(q,{page:d,perPage:h,totalPage:(b=t.data)==null?void 0:b.data.totalDocs,hasNextPage:(N=(P=t.data)==null?void 0:P.data)==null?void 0:N.hasNextPage,hasPrevPage:(S=t.data)==null?void 0:S.data.hasPrevPage,setPage:C,setPerPage:L})})]})]})})}export{Z as default};
