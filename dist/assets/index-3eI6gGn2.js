import{j as e,B as i,A as D,d as $,e as T,g as P,_ as o}from"./index-5LZ_nlU9.js";import{u as E,d as I,r as a}from"./router-Bu5b4_LN.js";import{C as _}from"./card-CYCGUlpe.js";import{b as B,a as F,P as U}from"./index-4gDiAr6t.js";import{L as O,P as R}from"./index-D1VwjDLs.js";import{S as V}from"./index-yhKCZPmb.js";import{T as q,a as K,b as W}from"./tabs-DCBKFjfm.js";import{C as G}from"./index-Dkup9m_i.js";import{O as H,P as L}from"./OverLayLoader-BLLVyQhG.js";import{P as J}from"./pencil-BmWu84P_.js";import{E as Q}from"./eye-DbzFGRQJ.js";import{T as X}from"./trash-Cz7uv1Y_.js";import"./axios-DmypytPv.js";import"./chevron-right-Bk5KSvyP.js";import"./select-UqvSj_yK.js";import"./input-5M_0HrzI.js";function je(){var j,p,g,b,f,N,v,y,w;const A=E(),M=new URLSearchParams(A.search).get("member-status"),l=I(),[m,c]=a.useState(1),[n,x]=a.useState(20),[d,C]=a.useState(""),[h,S]=a.useState(M??""),u=B({}),r=F({api:`${P.getAllMembers}?page=${m}&limit=${n}&q=${d}`,key:"getAllMembersDataWithKey",value:[m,n],options:{enabled:!0}}),k=async s=>{G("Are you sure?","Do you want to delete this member?",async()=>{try{const t=await u.mutateAsync({api:`${P.deleteMember}/${s}`,key:"deleteMember",value:s});t.data.success?(o.success(t.data.message),r.refetch()):o.error(t.data.message)}catch{o.error("Something went wrong")}})};return e.jsxs(U,{title:"Member List",children:[u.isPending&&e.jsx(H,{}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("h1",{className:"text-base font-semibold text-muted-foreground",children:["Member List(",(j=r.data)==null?void 0:j.data.totalDocs,")"]}),e.jsxs(i,{size:"sm",className:"bg-primary text-white",onClick:()=>l("/gym-app/add-member"),children:[e.jsx(L,{size:20}),e.jsx("h1",{className:"ms-1 text-xs",children:"Add Member"})]})]}),e.jsx("div",{className:"border-t border-secondary mt-3 mb-2"}),e.jsx(V,{search:d,setSearch:C,refetch:r.refetch,isFetching:r.isLoading,setPage:c}),e.jsx("div",{className:"mt-4 overflow-x-hidden",children:e.jsx(q,{defaultValue:h==""?"2":h,className:"w-full",children:e.jsx(K,{className:"w-full",children:e.jsx(W,{className:"w-full",value:"2",onClick:()=>{S(""),x(5),c(1)},children:"All Member"})})})}),e.jsx("div",{className:"border-t border-secondary mt-1 mb-1"}),e.jsxs(O,{dataLength:(g=(p=r.data)==null?void 0:p.data)==null?void 0:g.docs.length,isLoading:r.isFetching,children:[e.jsx("div",{className:"grid grid-cols-1 gap-3 mt-2",children:(f=(b=r.data)==null?void 0:b.data)==null?void 0:f.docs.map((s,t)=>e.jsxs(_,{children:[e.jsx("div",{className:"p-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center  ",children:[e.jsxs(D,{className:"w-14 h-14 border  dark:border-gray-700",children:[e.jsx($,{src:s==null?void 0:s.fullImgUrl,alt:"@shadcn"}),e.jsx(T,{className:"text-base text-primary",children:s==null?void 0:s.memberName.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"ml-1",children:[e.jsxs("div",{className:"text-primary font-semibold text-sm flex gap-2",children:[e.jsxs("h1",{children:[" ",s==null?void 0:s.memberName]}),e.jsx("h1",{className:"mt-1.5",children:(s==null?void 0:s.status)==1?e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}):e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"})})]}),e.jsx("div",{className:"text-primary font-bold ",children:e.jsx("h1",{className:"text-muted-foreground text-xs",children:s==null?void 0:s.mobile})})]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-primary font-semibold text-sm",children:s==null?void 0:s.generatedId}),e.jsx("small",{className:"text-muted-foreground font-bold text-xs",children:"Member ID"})]})]})}),e.jsx("div",{className:"px-4 mb-4 gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-primary font-semibold text-xs truncate w-44",children:s==null?void 0:s.email})}),e.jsx("div",{children:e.jsx("h1",{className:"text-primary font-semibold text-xs",children:s.planMappingId.map(z=>z.plan).join(", ")})})]})}),e.jsxs("div",{className:"flex items-center justify-between px-4 mb-4 gap-3",children:[e.jsxs(i,{size:"sm",variant:"outline",className:"text-secondary-foreground border-secondary-foreground w-full h-6 ",onClick:()=>l(`/gym-app/update-member/${s._id}`),children:[e.jsx(J,{size:16}),e.jsx("h1",{className:"ms-1 text-xs",children:"Edit"})]}),e.jsxs(i,{variant:"outline",size:"sm",className:"text-primary w-full h-6 ",onClick:()=>l(`/gym-app/view-member/${s._id}`),children:[e.jsx(Q,{size:16}),e.jsx("h1",{className:"ms-1 text-xs",children:"View"})]}),e.jsxs(i,{size:"sm",variant:"outline",className:(s==null?void 0:s.status)==1?" text-red-700 border-red-700 w-full h-6":" text-green-700 border-green-700 w-full h-6",onClick:()=>k(s._id),children:[(s==null?void 0:s.status)==1?e.jsx(X,{size:16}):e.jsx(L,{size:16}),e.jsx("h1",{className:"ms-1 text-xs",children:(s==null?void 0:s.status)==1?"Delete":"Activate"})]})]})]},t+1))}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx(R,{page:m,perPage:n,totalPage:(N=r.data)==null?void 0:N.data.totalDocs,hasNextPage:(y=(v=r.data)==null?void 0:v.data)==null?void 0:y.hasNextPage,hasPrevPage:(w=r.data)==null?void 0:w.data.hasPrevPage,setPage:c,setPerPage:x})})]})]})}export{je as default};
