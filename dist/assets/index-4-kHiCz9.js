import{j as e,_ as t,g as f}from"./index-BneNl2Z5.js";import{d as j,r as o}from"./router-Bu5b4_LN.js";import{u as N,F as w}from"./FileUpload-DBYlzVjw.js";import{o as y}from"./yup-DcUKCxyz.js";import{F,R as l,c as v,a as m,e as E}from"./RHFTextField-BHHA61kv.js";import{u as q,P as A}from"./index-DwQQI-k-.js";import{R as P}from"./RHFTextArea--h2Hud2e.js";import{B as R}from"./ButtonLoading-COSWDSPy.js";import"./input-BvrjWTRa.js";import{C as S}from"./index-BNJ7OnKh.js";import{r as C}from"./resizeImage-nNayW6hE.js";import"./axios-DmypytPv.js";import"./select-CIhWMXrQ.js";const M=v().shape({fullName:m().required("Name is required"),gymName:m().required("Gym Name is required"),address:m().required("Address is required"),mobile:m().required("Mobile is required"),password:m().required("Password is required"),email:m().required().email().label("Email"),imageUrl:E().nullable()});function k(){const p=j(),n=q({}),[a,u]=o.useState(null),[g,x]=o.useState(null),d=N({defaultValues:{fullName:"",password:"",address:"",mobile:"",gymName:"",email:"",imageUrl:null},resolver:y(M)}),h=async s=>{const r=new FormData;r.append("fullName",s.fullName),r.append("gymName",s.gymName),r.append("password",s.password),r.append("address",s.address),r.append("mobile",s.mobile),r.append("email",(s==null?void 0:s.email)??""),r.append("imageUrl",g),S("Are you sure?","Do you want to add this Owner?",async()=>{try{const i=await n.mutateAsync({api:f.createOwner,data:r});i.data.success?(t.success(i.data.message),p("/gym-app/owner-list")):t.error(i.data.message)}catch{t.error("Something went wrong")}})},b=async()=>{var c;if(((c=a==null?void 0:a[0])==null?void 0:c.size)>20*1024*1024)return t.error("File size is too large");const s=a==null?void 0:a[0];if(!s)return;const r=await C(s),i=new File([r],s==null?void 0:s.name,{type:s==null?void 0:s.type});x(i)};return o.useEffect(()=>{a&&b()},[a]),e.jsxs(A,{title:"Registration Form ",className:"border  mx-2 bg-white shadow-md rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-between mt-4 ",children:e.jsx("h1",{className:"text-base font-semibold text-muted-foreground",children:"Registration Form"})}),e.jsx("div",{className:"border-t border-secondary mt-3"}),e.jsxs(F,{methods:d,onSubmit:d.handleSubmit(h),children:[e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx(l,{name:"fullName",label:"Owner Name",placeholder:"Enter Owner Name"})}),e.jsx("div",{children:e.jsx(l,{name:"email",label:"Email",placeholder:"Enter Email"})}),e.jsx("div",{children:e.jsx(l,{name:"mobile",label:"Mobile",placeholder:"Enter Mobile",inputValidation:["mobile","number"]})}),e.jsx("div",{children:e.jsx(l,{name:"gymName",label:"Gym Name",placeholder:"Enter Gym Name"})}),e.jsx("div",{children:e.jsx(l,{name:"password",label:"Password",placeholder:"Enter Password"})}),e.jsx("div",{className:"col-span-2",children:e.jsx(w,{onChangeValue:u,files:a,maxFiles:1,maxSize:20*1024*1024,accept:"image/*",multiple:!1})}),e.jsx("div",{className:"col-span-2",children:e.jsx(P,{name:"address",label:"Address",placeholder:"Enter Address"})})]})}),e.jsx("div",{className:"mt-8 flex justify-center mb-4",children:e.jsx(R,{type:"submit",className:"bg-primary text-white",isLoading:n.isPending,children:"Add Owner"})})]})]})}export{k as default};
