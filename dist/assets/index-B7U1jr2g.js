import{j as e,B as a,A as z,d as D,e as E,g as y,_ as o}from"./index-5LZ_nlU9.js";import{u as M,d as T,r as i}from"./router-Bu5b4_LN.js";import{C as _}from"./card-CYCGUlpe.js";import{b as P,a as I,P as B}from"./index-4gDiAr6t.js";import{L as F,P as U}from"./index-D1VwjDLs.js";import{S as R}from"./index-yhKCZPmb.js";import{T as V,a as q,b as G}from"./tabs-DCBKFjfm.js";import{O as H,P as J}from"./OverLayLoader-BLLVyQhG.js";import{P as K}from"./pencil-BmWu84P_.js";import{E as Q}from"./eye-DbzFGRQJ.js";import"./axios-DmypytPv.js";import"./chevron-right-Bk5KSvyP.js";import"./select-UqvSj_yK.js";import"./input-5M_0HrzI.js";function de(){var u,g,j,f,p,b,N,v,w;const L=M(),A=new URLSearchParams(L.search).get("member-status"),l=T(),[n,c]=i.useState(1),[m,d]=i.useState(20),[x,S]=i.useState(""),[h,O]=i.useState(A??""),C=P({}),k=P({}),t=I({api:`${y.getAllOwners}?page=${n}&limit=${m}&q=${x}`,key:"getAllOwners",value:[n,m],options:{enabled:!0}}),$=async s=>{try{const r=await k.mutateAsync({api:`${y.updateOwnerStatus}/${s}`});r.data.success?(o.success(r.data.message),t.refetch()):o.error(r.data.message)}catch{o.error("Something went wrong")}};return e.jsxs(B,{title:"Owner List",children:[C.isPending&&e.jsx(H,{}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("h1",{className:"text-base font-semibold text-muted-foreground",children:["Owner List(",(u=t.data)==null?void 0:u.data.totalDocs,")"]}),e.jsxs(a,{size:"sm",className:"bg-primary text-white",onClick:()=>l("/gym-app/registration-form"),children:[e.jsx(J,{size:20}),e.jsx("h1",{className:"ms-1 text-xs",children:"Add Owner"})]})]}),e.jsx("div",{className:"border-t border-secondary mt-3 mb-2"}),e.jsx(R,{search:x,setSearch:S,refetch:t.refetch,isFetching:t.isLoading,setPage:c}),e.jsx("div",{className:"mt-4 overflow-x-hidden",children:e.jsx(V,{defaultValue:h==""?"2":h,className:"w-full",children:e.jsx(q,{className:"w-full",children:e.jsx(G,{className:"w-full",value:"2",onClick:()=>{O(""),d(5),c(1)},children:"All Owner"})})})}),e.jsx("div",{className:"border-t border-secondary mt-1 mb-1"}),e.jsxs(F,{dataLength:(j=(g=t.data)==null?void 0:g.data)==null?void 0:j.owners.length,isLoading:t.isFetching,children:[e.jsx("div",{className:"grid grid-cols-1 gap-3 mt-2",children:(p=(f=t.data)==null?void 0:f.data)==null?void 0:p.owners.map((s,r)=>e.jsxs(_,{children:[e.jsx("div",{className:"p-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center  ",children:[e.jsxs(z,{className:"w-14 h-14 border  dark:border-gray-700",children:[e.jsx(D,{src:s==null?void 0:s.fullImgUrl,alt:"@shadcn"}),e.jsx(E,{className:"text-base text-primary",children:s==null?void 0:s.fullName.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"ml-1",children:[e.jsxs("div",{className:"text-primary font-semibold text-sm flex gap-2",children:[e.jsxs("h1",{children:[" ",s==null?void 0:s.fullName]}),e.jsx("h1",{className:"mt-1.5",children:(s==null?void 0:s.status)==1?e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}):e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"})})]}),e.jsx("div",{className:"text-primary font-bold ",children:e.jsx("h1",{className:"text-muted-foreground text-xs",children:s==null?void 0:s.mobile})})]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-primary font-semibold text-sm",children:s==null?void 0:s.generatedId}),e.jsx("small",{className:"text-muted-foreground font-bold text-xs",children:"Member ID"})]})]})}),e.jsx("div",{className:"px-4 mb-4 gap-2",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{children:e.jsx("h1",{className:"text-primary font-semibold text-xs truncate w-44",children:s==null?void 0:s.email})})})}),e.jsxs("div",{className:"flex items-center justify-between px-4 mb-4 gap-3",children:[e.jsxs(a,{size:"sm",variant:"outline",className:"text-secondary-foreground border-secondary-foreground w-full h-6 ",onClick:()=>l(`/gym-app/update-owner/${s._id}`),children:[e.jsx(K,{size:16}),e.jsx("h1",{className:"ms-1 text-xs",children:"Edit"})]}),e.jsxs(a,{variant:"outline",size:"sm",className:"text-primary w-full h-6 ",onClick:()=>l(`/gym-app/view-member/${s._id}`),children:[e.jsx(Q,{size:16}),e.jsx("h1",{className:"ms-1 text-xs",children:"View"})]}),e.jsx(a,{size:"sm",className:s.status==1?"bg-destructive":"bg-green-700",onClick:()=>$(s._id),children:s.status==1?"Deactivate":"Activate"})]})]},r+1))}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx(U,{page:n,perPage:m,totalPage:(b=t.data)==null?void 0:b.data.totalDocs,hasNextPage:(v=(N=t.data)==null?void 0:N.data)==null?void 0:v.hasNextPage,hasPrevPage:(w=t.data)==null?void 0:w.data.hasPrevPage,setPage:c,setPerPage:d})})]})]})}export{de as default};
