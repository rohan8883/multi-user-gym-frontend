import{j as e,_ as t,g}from"./index-B9krRoJR.js";import{d as j,r as m}from"./router-Bu5b4_LN.js";import{u as N,F as w}from"./FileUpload-Cb5_vJxa.js";import{o as y}from"./yup-DPyyl0yG.js";import{F,R as o,c as v,a as l,e as A}from"./RHFTextField-BNsBia26.js";import{u as E,P as O}from"./index-CynrhlML.js";import{R as q}from"./RHFTextArea-CFWdjQ9i.js";import{B as M}from"./ButtonLoading-Dh69wOXH.js";import"./input-BzfXInzY.js";import{C as R}from"./index-BOolpYyw.js";import{r as S}from"./resizeImage-nNayW6hE.js";import"./axios-DmypytPv.js";import"./select-Dx9eRRyV.js";const C=v().shape({fullName:l().required("Member Name is required"),address:l().required("Address is required"),mobile:l().required("Mobile is required"),email:l().notRequired().email().label("Email"),imageUrl:A().nullable()});function k(){const u=j(),n=E({}),[r,p]=m.useState(null),[x,h]=m.useState(null),d=N({defaultValues:{fullName:"",address:"",mobile:"",email:"",imageUrl:null},resolver:y(C)}),b=async s=>{const a=new FormData;a.append("fullName",s.fullName),a.append("address",s.address),a.append("mobile",s.mobile),a.append("email",(s==null?void 0:s.email)??""),a.append("imageUrl",x),R("Are you sure?","Do you want to add this Owner?",async()=>{try{const i=await n.mutateAsync({api:g.createOwner,data:a});i.data.success?(t.success(i.data.message),u("/gym-app/owner-list")):t.error(i.data.message)}catch{t.error("Something went wrong")}})},f=async()=>{var c;if(((c=r==null?void 0:r[0])==null?void 0:c.size)>20*1024*1024)return t.error("File size is too large");const s=r==null?void 0:r[0];if(!s)return;const a=await S(s),i=new File([a],s==null?void 0:s.name,{type:s==null?void 0:s.type});h(i)};return m.useEffect(()=>{r&&f()},[r]),e.jsxs(O,{title:"Add Owner",children:[e.jsx("div",{className:"flex items-center justify-between mt-4",children:e.jsx("h1",{className:"text-base font-semibold text-muted-foreground",children:"ADD OWNER"})}),e.jsx("div",{className:"border-t border-secondary mt-3"}),e.jsxs(F,{methods:d,onSubmit:d.handleSubmit(b),children:[e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx(o,{name:"fullName",label:"Owner Name",placeholder:"Enter Owner Name"})}),e.jsx("div",{children:e.jsx(o,{name:"email",label:"Email",placeholder:"Enter Email"})}),e.jsx("div",{children:e.jsx(o,{name:"mobile",label:"Mobile",placeholder:"Enter Mobile",inputValidation:["mobile","number"]})}),e.jsx("div",{className:"col-span-2",children:e.jsx(w,{onChangeValue:p,files:r,maxFiles:1,maxSize:20*1024*1024,accept:"image/*",multiple:!1})}),e.jsx("div",{className:"col-span-2",children:e.jsx(q,{name:"address",label:"Address",placeholder:"Enter Address"})})]})}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx(M,{type:"submit",className:"bg-primary text-white",isLoading:n.isPending,children:"Add Owner"})})]})]})}export{k as default};
