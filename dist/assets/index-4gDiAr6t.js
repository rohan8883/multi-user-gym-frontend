var rt=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var i=(s,t,e)=>(rt(s,t,"read from private field"),e?e.call(s):t.get(s)),o=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},u=(s,t,e,r)=>(rt(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e);var d=(s,t,e)=>(rt(s,t,"access private method"),e);import{ao as Qt,ap as X,aq as jt,ar as Ot,as as St,at as Bt,au as Kt,av as kt,aw as Et,ax as Z,ay as wt,az as qt,aA as Ut,aB as pt,u as Wt,j as B,aC as _t,G as zt}from"./index-5LZ_nlU9.js";import{r as p}from"./router-Bu5b4_LN.js";var v,c,k,y,M,T,O,q,D,L,Q,U,w,A,P,K,W,nt,_,at,z,ht,G,ot,H,ut,V,ct,$,lt,Y,Pt,It,Gt=(It=class extends Qt{constructor(t,e){super();o(this,P);o(this,W);o(this,_);o(this,z);o(this,G);o(this,H);o(this,V);o(this,$);o(this,Y);o(this,v,void 0);o(this,c,void 0);o(this,k,void 0);o(this,y,void 0);o(this,M,void 0);o(this,T,void 0);o(this,O,void 0);o(this,q,void 0);o(this,D,void 0);o(this,L,void 0);o(this,Q,void 0);o(this,U,void 0);o(this,w,void 0);o(this,A,new Set);this.options=e,u(this,v,t),u(this,O,null),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,c).addObserver(this),xt(i(this,c),this.options)?d(this,P,K).call(this):this.updateResult(),d(this,G,ot).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return dt(i(this,c),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return dt(i(this,c),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,d(this,H,ut).call(this),d(this,V,ct).call(this),i(this,c).removeObserver(this)}setOptions(t,e){const r=this.options,n=i(this,c);if(this.options=i(this,v).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");d(this,$,lt).call(this),i(this,c).setOptions(this.options),r._defaulted&&!X(this.options,r)&&i(this,v).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,c),observer:this});const a=this.hasListeners();a&&Ft(i(this,c),n,this.options,r)&&d(this,P,K).call(this),this.updateResult(e),a&&(i(this,c)!==n||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&d(this,W,nt).call(this);const h=d(this,_,at).call(this);a&&(i(this,c)!==n||this.options.enabled!==r.enabled||h!==i(this,w))&&d(this,z,ht).call(this,h)}getOptimisticResult(t){const e=i(this,v).getQueryCache().build(i(this,v),t),r=this.createResult(e,t);return Vt(this,r)&&(u(this,y,r),u(this,T,this.options),u(this,M,i(this,c).state)),r}getCurrentResult(){return i(this,y)}trackResult(t,e){const r={};return Object.keys(t).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),e==null||e(n),t[n])})}),r}trackProp(t){i(this,A).add(t)}getCurrentQuery(){return i(this,c)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=i(this,v).defaultQueryOptions(t),r=i(this,v).getQueryCache().build(i(this,v),e);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,e))}fetch(t){return d(this,P,K).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,y)))}createResult(t,e){var Ct;const r=i(this,c),n=this.options,a=i(this,y),h=i(this,M),f=i(this,T),S=t!==r?t.state:i(this,k),{state:b}=t;let l={...b},yt=!1,C;if(e._optimisticResults){const g=this.hasListeners(),it=!g&&xt(t,e),At=g&&Ft(t,r,e,n);(it||At)&&(l={...l,...kt(b.data,t.options)}),e._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:vt,errorUpdatedAt:mt,status:I}=l;if(e.select&&l.data!==void 0)if(a&&l.data===(h==null?void 0:h.data)&&e.select===i(this,q))C=i(this,D);else try{u(this,q,e.select),C=e.select(l.data),C=Et(a==null?void 0:a.data,C,e),u(this,D,C),u(this,O,null)}catch(g){u(this,O,g)}else C=l.data;if(e.placeholderData!==void 0&&C===void 0&&I==="pending"){let g;if(a!=null&&a.isPlaceholderData&&e.placeholderData===(f==null?void 0:f.placeholderData))g=a.data;else if(g=typeof e.placeholderData=="function"?e.placeholderData((Ct=i(this,L))==null?void 0:Ct.state.data,i(this,L)):e.placeholderData,e.select&&g!==void 0)try{g=e.select(g),u(this,O,null)}catch(it){u(this,O,it)}g!==void 0&&(I="success",C=Et(a==null?void 0:a.data,g,e),yt=!0)}i(this,O)&&(vt=i(this,O),C=i(this,D),mt=Date.now(),I="error");const tt=l.fetchStatus==="fetching",et=I==="pending",st=I==="error",Rt=et&&tt,gt=C!==void 0;return{status:I,fetchStatus:l.fetchStatus,isPending:et,isSuccess:I==="success",isError:st,isInitialLoading:Rt,isLoading:Rt,data:C,dataUpdatedAt:l.dataUpdatedAt,error:vt,errorUpdatedAt:mt,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>S.dataUpdateCount||l.errorUpdateCount>S.errorUpdateCount,isFetching:tt,isRefetching:tt&&!et,isLoadingError:st&&!gt,isPaused:l.fetchStatus==="paused",isPlaceholderData:yt,isRefetchError:st&&gt,isStale:bt(t,e),refetch:this.refetch}}updateResult(t){const e=i(this,y),r=this.createResult(i(this,c),this.options);if(u(this,M,i(this,c).state),u(this,T,this.options),i(this,M).data!==void 0&&u(this,L,i(this,c)),X(r,e))return;u(this,y,r);const n={},a=()=>{if(!e)return!0;const{notifyOnChangeProps:h}=this.options,f=typeof h=="function"?h():h;if(f==="all"||!f&&!i(this,A).size)return!0;const R=new Set(f??i(this,A));return this.options.throwOnError&&R.add("error"),Object.keys(i(this,y)).some(S=>{const b=S;return i(this,y)[b]!==e[b]&&R.has(b)})};(t==null?void 0:t.listeners)!==!1&&a()&&(n.listeners=!0),d(this,Y,Pt).call(this,{...n,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&d(this,G,ot).call(this)}},v=new WeakMap,c=new WeakMap,k=new WeakMap,y=new WeakMap,M=new WeakMap,T=new WeakMap,O=new WeakMap,q=new WeakMap,D=new WeakMap,L=new WeakMap,Q=new WeakMap,U=new WeakMap,w=new WeakMap,A=new WeakMap,P=new WeakSet,K=function(t){d(this,$,lt).call(this);let e=i(this,c).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(jt)),e},W=new WeakSet,nt=function(){if(d(this,H,ut).call(this),Ot||i(this,y).isStale||!St(this.options.staleTime))return;const e=Bt(i(this,y).dataUpdatedAt,this.options.staleTime)+1;u(this,Q,setTimeout(()=>{i(this,y).isStale||this.updateResult()},e))},_=new WeakSet,at=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,c)):this.options.refetchInterval)??!1},z=new WeakSet,ht=function(t){d(this,V,ct).call(this),u(this,w,t),!(Ot||this.options.enabled===!1||!St(i(this,w))||i(this,w)===0)&&u(this,U,setInterval(()=>{(this.options.refetchIntervalInBackground||Kt.isFocused())&&d(this,P,K).call(this)},i(this,w)))},G=new WeakSet,ot=function(){d(this,W,nt).call(this),d(this,z,ht).call(this,d(this,_,at).call(this))},H=new WeakSet,ut=function(){i(this,Q)&&(clearTimeout(i(this,Q)),u(this,Q,void 0))},V=new WeakSet,ct=function(){i(this,U)&&(clearInterval(i(this,U)),u(this,U,void 0))},$=new WeakSet,lt=function(){const t=i(this,v).getQueryCache().build(i(this,v),this.options);if(t===i(this,c))return;const e=i(this,c);u(this,c,t),u(this,k,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},Y=new WeakSet,Pt=function(t){Z.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(i(this,y))}),i(this,v).getQueryCache().notify({query:i(this,c),type:"observerResultsUpdated"})})},It);function Ht(s,t){return t.enabled!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function xt(s,t){return Ht(s,t)||s.state.data!==void 0&&dt(s,t,t.refetchOnMount)}function dt(s,t,e){if(t.enabled!==!1){const r=typeof e=="function"?e(s):e;return r==="always"||r!==!1&&bt(s,t)}return!1}function Ft(s,t,e,r){return(s!==t||r.enabled===!1)&&(!e.suspense||s.state.status!=="error")&&bt(s,e)}function bt(s,t){return t.enabled!==!1&&s.isStaleByTime(t.staleTime)}function Vt(s,t){return!X(s.getCurrentResult(),t)}var x,F,m,E,j,J,N,ft,Mt,$t=(Mt=class extends Qt{constructor(t,e){super();o(this,j);o(this,N);o(this,x,void 0);o(this,F,void 0);o(this,m,void 0);o(this,E,void 0);u(this,x,t),this.setOptions(e),this.bindMethods(),d(this,j,J).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const e=this.options;this.options=i(this,x).defaultMutationOptions(t),X(this.options,e)||i(this,x).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,m),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&wt(e.mutationKey)!==wt(this.options.mutationKey)?this.reset():((r=i(this,m))==null?void 0:r.state.status)==="pending"&&i(this,m).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=i(this,m))==null||t.removeObserver(this)}onMutationUpdate(t){d(this,j,J).call(this),d(this,N,ft).call(this,t)}getCurrentResult(){return i(this,F)}reset(){var t;(t=i(this,m))==null||t.removeObserver(this),u(this,m,void 0),d(this,j,J).call(this),d(this,N,ft).call(this)}mutate(t,e){var r;return u(this,E,e),(r=i(this,m))==null||r.removeObserver(this),u(this,m,i(this,x).getMutationCache().build(i(this,x),this.options)),i(this,m).addObserver(this),i(this,m).execute(t)}},x=new WeakMap,F=new WeakMap,m=new WeakMap,E=new WeakMap,j=new WeakSet,J=function(){var e;const t=((e=i(this,m))==null?void 0:e.state)??qt();u(this,F,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},N=new WeakSet,ft=function(t){Z.batch(()=>{var e,r,n,a,h,f,R,S;if(i(this,E)&&this.hasListeners()){const b=i(this,F).variables,l=i(this,F).context;(t==null?void 0:t.type)==="success"?((r=(e=i(this,E)).onSuccess)==null||r.call(e,t.data,b,l),(a=(n=i(this,E)).onSettled)==null||a.call(n,t.data,null,b,l)):(t==null?void 0:t.type)==="error"&&((f=(h=i(this,E)).onError)==null||f.call(h,t.error,b,l),(S=(R=i(this,E)).onSettled)==null||S.call(R,void 0,t.error,b,l))}this.listeners.forEach(b=>{b(i(this,F))})})},Mt),Tt=p.createContext(!1),Nt=()=>p.useContext(Tt);Tt.Provider;function Jt(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Xt=p.createContext(Jt()),Yt=()=>p.useContext(Xt);function Dt(s,t){return typeof s=="function"?s(...t):!!s}function Zt(){}var te=(s,t)=>{(s.suspense||s.throwOnError)&&(t.isReset()||(s.retryOnMount=!1))},ee=s=>{p.useEffect(()=>{s.clearReset()},[s])},se=({result:s,errorResetBoundary:t,throwOnError:e,query:r})=>s.isError&&!t.isReset()&&!s.isFetching&&r&&Dt(e,[s.error,r]),ie=s=>{s.suspense&&typeof s.staleTime!="number"&&(s.staleTime=1e3)},re=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,ne=(s,t,e)=>t.fetchOptimistic(s).catch(()=>{e.clearReset()});function ae(s,t,e){const r=Ut(),n=Nt(),a=Yt(),h=r.defaultQueryOptions(s);h._optimisticResults=n?"isRestoring":"optimistic",ie(h),te(h,a),ee(a);const[f]=p.useState(()=>new t(r,h)),R=f.getOptimisticResult(h);if(p.useSyncExternalStore(p.useCallback(S=>{const b=n?()=>{}:f.subscribe(Z.batchCalls(S));return f.updateResult(),b},[f,n]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),p.useEffect(()=>{f.setOptions(h,{listeners:!1})},[h,f]),re(h,R))throw ne(h,f,a);if(se({result:R,errorResetBoundary:a,throwOnError:h.throwOnError,query:r.getQueryCache().get(h.queryHash)}))throw R.error;return h.notifyOnChangeProps?R:f.trackResult(R)}function he(s,t){return ae(s,Gt)}function Lt(s,t){const e=Ut(),[r]=p.useState(()=>new $t(e,s));p.useEffect(()=>{r.setOptions(s)},[r,s]);const n=p.useSyncExternalStore(p.useCallback(h=>r.subscribe(Z.batchCalls(h)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=p.useCallback((h,f)=>{r.mutate(h,f).catch(Zt)},[r]);if(n.error&&Dt(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:a,mutateAsync:n.mutate}}const oe=async(s,t)=>(await pt.get(s,{...t})).data;function ve({key:s,api:t,options:e,value:r,config:n}){return he({queryKey:[s??t,...r??[]],queryFn:async()=>await oe(t,n),refetchOnReconnect:"always",refetchOnWindowFocus:!1,...e})}const ue=(s,t)=>pt.post(s,t),me=({options:s})=>Lt({mutationFn:({api:t,data:e})=>ue(t,e),...s}),ce=(s,t)=>pt.put(s,t),Re=({options:s})=>Lt({mutationFn:({api:t,data:e})=>ce(t,e),...s});function le(s=""){const{setTitle:t}=Wt();return p.useEffect(()=>{t(s)},[s]),null}const de=p.forwardRef(({children:s,title:t="",meta:e,className:r,...n},a)=>(le(t),p.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[t]),B.jsxs(B.Fragment,{children:[B.jsxs(_t,{children:[B.jsx("title",{children:`${t} | GymSphere`}),e]}),B.jsx("div",{ref:a,...n,className:zt("px-4 py-1",r),children:s})]}))),ge=de;export{ge as P,ve as a,Re as b,me as u};
