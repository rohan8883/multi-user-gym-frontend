import{j as e,S as F,g,_ as o}from"./index-5LZ_nlU9.js";import{d as E,e as M,r as m}from"./router-Bu5b4_LN.js";import{u as O,F as S}from"./FileUpload-B8QEeBcg.js";import{o as U}from"./yup-JIk-gZdR.js";import{F as A,R as p,c as q,a as c,e as P}from"./RHFTextField-BDc5GpPO.js";import{b as R,a as $,P as z}from"./index-4gDiAr6t.js";import{R as C}from"./RHFTextArea-CPKwknZ8.js";import{B as D}from"./ButtonLoading-BOLt1f3D.js";import"./input-5M_0HrzI.js";import{r as V}from"./resizeImage-nNayW6hE.js";import"./axios-DmypytPv.js";import"./select-UqvSj_yK.js";const I=q().shape({fullName:c().required("Owner Name is required"),address:c().required("Address is required"),mobile:c().required("Mobile is required"),email:c().notRequired().email().label("Email"),imageUrl:P().nullable()});function Y(){var f;const h=E(),{id:n}=M(),[r,j]=m.useState(null),[N,w]=m.useState(null),x=R({}),i=$({api:`${g.getOwner}/${n}`,key:"getOwner",value:[n],options:{enabled:!!n}}),d=m.useMemo(()=>{var a,s,t,l,b;return(a=i.data)!=null&&a.data?{fullName:(s=i.data)==null?void 0:s.data.fullName,address:(t=i.data)==null?void 0:t.data.address,mobile:(l=i.data)==null?void 0:l.data.mobile,email:(b=i.data)==null?void 0:b.data.email,imageUrl:null}:{fullName:"",address:"",mobile:"",email:"",imageUrl:null}},[(f=i.data)==null?void 0:f.data]),u=O({defaultValues:d,resolver:U(I)}),v=async a=>{const s=new FormData;s.append("fullName",a.fullName),s.append("address",a.address),s.append("mobile",a.mobile),s.append("email",a.email??""),s.append("imageUrl",N);try{const t=await x.mutateAsync({api:`${g.updateOwner}/${n}`,data:s});t.data.success?(o.success(t.data.message),h("/gym-app/owner-list?member-status=1")):o.error(t.data.message)}catch{o.error("Something went wrong")}};m.useEffect(()=>{d&&u.reset(d)},[d]);const y=async()=>{var l;if(((l=r==null?void 0:r[0])==null?void 0:l.size)>20*1024*1024)return o.error("File size is too large");const a=r==null?void 0:r[0];if(!a)return;const s=await V(a),t=new File([s],a==null?void 0:a.name,{type:a==null?void 0:a.type});w(t)};return m.useEffect(()=>{r&&y()},[r]),i.isLoading?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(F,{})}):e.jsxs(z,{title:"Update Owner",children:[e.jsx("div",{className:"flex items-center justify-between mt-4",children:e.jsx("h1",{className:"text-base font-semibold text-muted-foreground",children:"UPDATE OWNER"})}),e.jsx("div",{className:"border-t border-secondary mt-3"}),e.jsxs(A,{methods:u,onSubmit:u.handleSubmit(v),children:[e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx(p,{name:"fullName",label:"Owner Name",placeholder:"Enter Owner Name"})}),e.jsx("div",{children:e.jsx(p,{name:"email",label:"Email",placeholder:"Enter Email"})}),e.jsx("div",{children:e.jsx(p,{name:"mobile",label:"Mobile",placeholder:"Enter Mobile",inputValidation:["mobile","number"]})}),e.jsx("div",{className:"col-span-2 mt-1",children:e.jsx(S,{onChangeValue:j,files:r,maxFiles:1,maxSize:20*1024*1024,accept:"image/*",multiple:!1})}),e.jsx("div",{className:"col-span-2",children:e.jsx(C,{name:"address",label:"Address",placeholder:"Enter Address"})})]})}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx(D,{type:"submit",className:"bg-primary text-white",isLoading:x.isPending,children:e.jsx("h1",{className:"text-xs",children:"Update Member"})})})]})]})}export{Y as default};
