import{j as e,_ as t,g as f}from"./index-BYleSzAv.js";import{d as N,r as o}from"./router-Bu5b4_LN.js";import{u as j,F as y}from"./FileUpload-Smf_QiF1.js";import{o as w}from"./yup-BYmlR7JW.js";import{F,R as l,c as v,a as m,e as E}from"./RHFTextField-BLtZrGx2.js";import{u as q,P as A}from"./index-DNwAX9p4.js";import{R}from"./RHFTextArea-MHLSCl8J.js";import{B as S}from"./ButtonLoading-SDMTmHwz.js";import"./input-C1Lmgpwx.js";import{C}from"./index-DK_bSy9Z.js";import{r as M}from"./resizeImage-nNayW6hE.js";import"./axios-DmypytPv.js";import"./select-DbIFP1Lo.js";const O=v().shape({fullName:m().required("Name is required"),gymName:m().required("Gym Name is required"),address:m().required("Address is required"),mobile:m().required("Mobile is required"),email:m().required().email().label("Email"),imageUrl:E().nullable()});function k(){const u=N(),n=q({}),[a,p]=o.useState(null),[g,x]=o.useState(null),d=j({defaultValues:{fullName:"",address:"",mobile:"",gymName:"",email:"",imageUrl:null},resolver:w(O)}),h=async s=>{const r=new FormData;r.append("fullName",s.fullName),r.append("gymName",s.gymName),r.append("address",s.address),r.append("mobile",s.mobile),r.append("email",(s==null?void 0:s.email)??""),r.append("imageUrl",g),C("Are you sure?","Do you want to add this Owner?",async()=>{try{const i=await n.mutateAsync({api:f.createOwner,data:r});i.data.success?(t.success(i.data.message),u("/gym-app/owner-list")):t.error(i.data.message)}catch{t.error("Something went wrong")}})},b=async()=>{var c;if(((c=a==null?void 0:a[0])==null?void 0:c.size)>20*1024*1024)return t.error("File size is too large");const s=a==null?void 0:a[0];if(!s)return;const r=await M(s),i=new File([r],s==null?void 0:s.name,{type:s==null?void 0:s.type});x(i)};return o.useEffect(()=>{a&&b()},[a]),e.jsxs(A,{title:"Registration Form ",className:"border  mx-2 bg-white shadow-md rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-between mt-4 ",children:e.jsx("h1",{className:"text-base font-semibold text-muted-foreground",children:"Registration Form"})}),e.jsx("div",{className:"border-t border-secondary mt-3"}),e.jsxs(F,{methods:d,onSubmit:d.handleSubmit(h),children:[e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx(l,{name:"fullName",label:"Owner Name",placeholder:"Enter Owner Name"})}),e.jsx("div",{children:e.jsx(l,{name:"email",label:"Email",placeholder:"Enter Email"})}),e.jsx("div",{children:e.jsx(l,{name:"mobile",label:"Mobile",placeholder:"Enter Mobile",inputValidation:["mobile","number"]})}),e.jsx("div",{children:e.jsx(l,{name:"gymName",label:"Gym Name",placeholder:"Enter Gym Name"})}),e.jsx("div",{className:"col-span-2",children:e.jsx(y,{onChangeValue:p,files:a,maxFiles:1,maxSize:20*1024*1024,accept:"image/*",multiple:!1})}),e.jsx("div",{className:"col-span-2",children:e.jsx(R,{name:"address",label:"Address",placeholder:"Enter Address"})})]})}),e.jsx("div",{className:"mt-8 flex justify-center mb-4",children:e.jsx(S,{type:"submit",className:"bg-primary text-white",isLoading:n.isPending,children:"Add Owner"})})]})]})}export{k as default};
